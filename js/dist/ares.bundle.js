!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="/js/dist/",e(0)}([function(t,e,r){t.exports=r(4)},function(t,e){function r(t,e){this.id=t,this.sn=e,this.data=null}function n(){gData.ares||(gData.ares=new r(partner_id,employee_sn)),gData.ares.init()}r.prototype.init=function(){this.data?this.render():this.getData()},r.prototype.getData=function(){var t="//localhost:6330/index.php",e={controller:"employee",action:"card"},r=this;$.getJSON(t,e,function(t){0==t.error&&(r.transformData(t.data),r.render())})},r.prototype.transformData=function(t){t.stars=[];var e;for(e=0;e<t.star_num;e++)t.stars.push(e);this.data=t},r.prototype.render=function(){if(this.data){var t=template("ares",this.data);document.getElementById("center").innerHTML=t}},t.exports=n},function(t,e){function r(t,e){this.id=t,this.sn=e,this.aresData=null,this.scoreData=null}function n(){gData.aresScore||(gData.aresScore=new r(partner_id,employee_sn)),gData.aresScore.init()}r.prototype.hasData=function(){return this.aresData&&this.scoreData},r.prototype.init=function(){this.hasData()?this.render():this.getData()},r.prototype.getData=function(){function t(){n.ares&&n.score&&i.render()}var e="//localhost:6330/index.php",r={controller:"employee",action:"card"},n={ares:!1,score:!1},i=this;$.getJSON(e,r,function(e){0==e.error&&(i.transformData(e.data),n.ares=!0,t())}),r.action="myScores",$.getJSON(e,r,function(e){0==e.error&&(i.scoreData=e.data,n.score=!0,t())})},r.prototype.transformData=function(t){t.stars=[];var e;for(e=0;e<t.star_num;e++)t.stars.push(e);this.aresData=t},r.prototype.render=function(){if(this.hasData()){var t,e={};for(t in this.aresData)e[t]=this.aresData[t];for(t in this.scoreData)e[t]=this.scoreData[t];var r=template("aresScore",e);document.getElementById("center").innerHTML=r}},t.exports=n},function(t,e){function r(t,e){this.id=t,this.sn=e,this.data=null,this.type="top"}function n(){gData.aresStore||(gData.aresStore=new r(partner_id,employee_sn)),gData.aresStore.init()}r.prototype.TYPE={top:"我帮助的",last:"需要帮助的"},r.prototype.hasData=function(){return this.data},r.prototype.init=function(){this.hasData()?this.render():this.getData()},r.prototype.getData=function(){var t="//localhost:6330/index.php",e={controller:"employee",action:"myStores",partner_id:this.id,employee_sn:this.sn,type:this.type},r=this;$.getJSON(t,e,function(t){0==t.error&&(r.data=t.data,r.data._view={type:r.TYPE,currentType:r.TYPE[r.type]},r.render())})},r.prototype.transformData=function(t){},r.prototype.render=function(){if(this.hasData()){var t=this.data,e=template("aresStore",t);document.getElementById("center").innerHTML=e;var r=this;$(".dropdown").click(function(t){t.stopPropagation(),$(".j-dropdown").hide(),$(this).next(".j-dropdown").show()}),$(".j-dropdown li").click(function(t){t.stopPropagation();var e=$(this).text();$("#js-title").text(e),$(".j-dropdown").hide(),r.type!==this.dataset.type&&(r.type=this.dataset.type,r.getData())}),$(document).click(function(t){t.stopPropagation(),$(".j-dropdown").hide()})}},t.exports=n},function(t,e,r){var n=r(1),i=r(2),o=r(3),s=r(5),a={ares:n,aresScore:i,aresStore:o},h=s.Router(a);h.init(["/ares"])},function(t,e,r){!function(t){function e(t,e,r,n){var i,o=0,s=0,a=0,r=(r||"(").toString(),n=(n||")").toString();for(i=0;i<t.length;i++){var h=t[i];if(h.indexOf(r,o)>h.indexOf(n,o)||~h.indexOf(r,o)&&!~h.indexOf(n,o)||!~h.indexOf(r,o)&&~h.indexOf(n,o)){if(s=h.indexOf(r,o),a=h.indexOf(n,o),~s&&!~a||!~s&&~a){var c=t.slice(0,(i||1)+1).join(e);t=[c].concat(t.slice((i||1)+1))}o=(a>s?a:s)+1,i=0}else o=0}return t}function r(t,e){for(var r,i=0,o="";r=t.substr(i).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)i=r.index+r[0].length,r[0]=r[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),o+=t.substr(0,r.index)+r[0];t=o+=t.substr(i);var s,a,h=t.match(/:([^\/]+)/gi);if(h){a=h.length;for(var c=0;c<a;c++)s=h[c],t="::"===s.slice(0,2)?s.slice(1):t.replace(s,n(s,e))}return t}function n(t,e,r){r=t;for(var n in e)if(e.hasOwnProperty(n)&&(r=e[n](t),r!==t))break;return r===t?"([._a-zA-Z0-9-%()]+)":r}function i(t,e,r){if(!t.length)return r();var n=0;!function i(){e(t[n],function(e){e||e===!1?(r(e),r=function(){}):(n+=1,n===t.length?r():i())})}()}function o(t){for(var e=[],r=0,n=t.length;r<n;r++)e=e.concat(t[r]);return e}function a(t,e){for(var r=0;r<t.length;r+=1)if(e(t[r],r,t)===!1)return}function h(){return""===c.hash||"#"===c.hash}var c=document.location,u={mode:"modern",hash:c.hash,history:!1,check:function(){var t=c.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function r(t){for(var e=0,r=p.listeners.length;e<r;e++)p.listeners[e](t)}var n=this;if(this.history=e,p.listeners||(p.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=r},500):window.onhashchange=r,this.mode="modern";else{var i=document.createElement("iframe");i.id="state-frame",i.style.display="none",document.body.appendChild(i),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&n.check()}),window.setInterval(function(){n.check()},50),this.onHashChanged=r,this.mode="legacy"}return p.listeners.push(t),this.mode},destroy:function(t){if(p&&p.listeners)for(var e=p.listeners,r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):c.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),r=e.contentDocument||e.contentWindow.document;r.open(),r.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),r.close()},syncHash:function(){var t=this._hash;return t!=c.hash&&(c.hash=t),this},onHashChanged:function(){}},p=t.Router=function(t){return this instanceof p?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(t||{}),void 0):new p(t)};p.prototype.init=function(t){var e,r=this;return this.handler=function(t){var e=t&&t.newURL||window.location.hash,n=r.history===!0?r.getPath():e.replace(/.*#/,"");r.dispatch("on","/"===n.charAt(0)?n:"/"+n)},u.init(this.handler,this.history),this.history===!1?h()&&t?c.hash=t:h()||r.dispatch("on","/"+c.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(e=h()&&t?t:h()?null:c.hash.replace(/^#/,""),e&&window.history.replaceState({},document.title,e)):e=this.getPath(),(e||this.run_in_init===!0)&&this.handler()),this},p.prototype.explode=function(){var t=this.history===!0?this.getPath():c.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},p.prototype.setRoute=function(t,e,r){var n=this.explode();return"number"==typeof t&&"string"==typeof e?n[t]=e:"string"==typeof r?n.splice(t,e,s):n=[t],u.setHash(n.join("/")),n},p.prototype.insertEx=function(t,e,r,n){return"once"===t&&(t="on",r=function(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}(r)),this._insert(t,e,r,n)},p.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var r=this.explode();e=r.indexOf(t)}else e=this.explode();return e},p.prototype.destroy=function(){return u.destroy(this.handler),this},p.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t};var f=/\?.*/;p.prototype.configure=function(t){t=t||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict||t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&t.convert_hash_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},p.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var r=new RegExp(t,"g");return this.params[t]=function(t){return t.replace(r,e.source||e)},this},p.prototype.on=p.prototype.route=function(t,r,n){var i=this;return!n&&"function"==typeof r&&(n=r,r=t,t="on"),Array.isArray(r)?r.forEach(function(e){i.on(t,e,n)}):(r.source&&(r=r.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){i.on(t.toLowerCase(),r,n)}):(r=r.split(new RegExp(this.delimiter)),r=e(r,this.delimiter),this.insert(t,this.scope.concat(r),n),void 0))},p.prototype.path=function(t,r){var n=this.scope.length;t.source&&(t=t.source.replace(/\\\//gi,"/")),t=t.split(new RegExp(this.delimiter)),t=e(t,this.delimiter),this.scope=this.scope.concat(t),r.call(this,this),this.scope.splice(n,t.length)},p.prototype.dispatch=function(t,e,r){function n(){o.last=s.after,o.invoke(o.runlist(s),o,r)}var i,o=this,s=this.traverse(t,e.replace(f,""),this.routes,""),a=this._invoked;return this._invoked=!0,s&&0!==s.length?("forward"===this.recurse&&(s=s.reverse()),i=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],i&&i.length>0&&a?(this.async?this.invoke(i,this,n):(this.invoke(i,this),n()),!0):(n(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},r),!1)},p.prototype.invoke=function(t,e,r){var n,o=this;this.async?(n=function(r,o){return Array.isArray(r)?i(r,n,o):void("function"==typeof r&&r.apply(e,(t.captures||[]).concat(o)))},i(t,n,function(){r&&r.apply(e,arguments)})):(n=function(r){return Array.isArray(r)?a(r,n):"function"==typeof r?r.apply(e,t.captures||[]):void("string"==typeof r&&o.resource&&o.resource[r].apply(e,t.captures||[]))},a(t,n))},p.prototype.traverse=function(t,e,r,n,i){function o(t){function e(t){for(var r=t.length-1;r>=0;r--)Array.isArray(t[r])?(e(t[r]),0===t[r].length&&t.splice(r,1)):i(t[r])||t.splice(r,1)}function r(t){for(var e=[],n=0;n<t.length;n++)e[n]=Array.isArray(t[n])?r(t[n]):t[n];return e}if(!i)return t;var n=r(t);return n.matched=t.matched,n.captures=t.captures,n.after=t.after.filter(i),e(n),n}var s,a,h,c,u=[];if(e===this.delimiter&&r[t])return c=[[r.before,r[t]].filter(Boolean)],c.after=[r.after].filter(Boolean),c.matched=!0,c.captures=[],o(c);for(var p in r)if(r.hasOwnProperty(p)&&(!this._methods[p]||this._methods[p]&&"object"==typeof r[p]&&!Array.isArray(r[p]))){if(s=a=n+this.delimiter+p,this.strict||(a+="["+this.delimiter+"]?"),h=e.match(new RegExp("^"+a)),!h)continue;if(h[0]&&h[0]==e&&r[p][t])return c=[[r[p].before,r[p][t]].filter(Boolean)],c.after=[r[p].after].filter(Boolean),c.matched=!0,c.captures=h.slice(1),this.recurse&&r===this.routes&&(c.push([r.before,r.on].filter(Boolean)),c.after=c.after.concat([r.after].filter(Boolean))),o(c);if(c=this.traverse(t,e,r[p],s),c.matched)return c.length>0&&(u=u.concat(c)),this.recurse&&(u.push([r[p].before,r[p].on].filter(Boolean)),c.after=c.after.concat([r[p].after].filter(Boolean)),r===this.routes&&(u.push([r.before,r.on].filter(Boolean)),c.after=c.after.concat([r.after].filter(Boolean)))),u.matched=!0,u.captures=c.captures,u.after=c.after,o(u)}return!1},p.prototype.insert=function(t,e,n,i){var o,s,a,h,c;if(e=e.filter(function(t){return t&&t.length>0}),i=i||this.routes,c=e.shift(),/\:|\*/.test(c)&&!/\\d|\\w/.test(c)&&(c=r(c,this.params)),e.length>0)return i[c]=i[c]||{},this.insert(t,e,n,i[c]);if(c||e.length||i!==this.routes){if(s=typeof i[c],a=Array.isArray(i[c]),i[c]&&!a&&"object"==s)switch(o=typeof i[c][t]){case"function":return void(i[c][t]=[i[c][t],n]);case"object":return void i[c][t].push(n);case"undefined":return void(i[c][t]=n)}else if("undefined"==s)return h={},h[t]=n,i[c]=h,void 0;throw new Error("Invalid route context: "+s)}switch(o=typeof i[t]){case"function":return void(i[t]=[i[t],n]);case"object":return void i[t].push(n);case"undefined":return void(i[t]=n)}},p.prototype.extend=function(t){function e(t){n._methods[t]=!0,n[t]=function(){var e=1===arguments.length?[t,""]:[t];n.on.apply(n,e.concat(Array.prototype.slice.call(arguments)))}}var r,n=this,i=t.length;for(r=0;r<i;r++)e(t[r])},p.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(o(t)):o(t);return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},p.prototype.mount=function(t,r){function n(r,n){var o=r,s=r.split(i.delimiter),a=typeof t[r],h=""===s[0]||!i._methods[s[0]],c=h?"on":o;h&&(o=o.slice((o.match(new RegExp("^"+i.delimiter))||[""])[0].length),s.shift()),h&&"object"===a&&!Array.isArray(t[r])?(n=n.concat(s),i.mount(t[r],n)):(h&&(n=n.concat(o.split(i.delimiter)),n=e(n,i.delimiter)),i.insert(c,n,t[r]))}if(t&&"object"==typeof t&&!Array.isArray(t)){var i=this;r=r||[],Array.isArray(r)||(r=r.split(i.delimiter));for(var o in t)t.hasOwnProperty(o)&&n(o,r.slice(0))}}}(e)}]);
//# sourceMappingURL=ares.bundle.js.map